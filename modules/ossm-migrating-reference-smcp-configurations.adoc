// Module included in the following assemblies:
//
// * service-mesh-docs-main/migrating/reference/ossm-migrating-reference.adoc

:_mod-docs-content-type: REFERENCE
[id="ossm-migrating-reference-smcp-configurations_{context}"]
= Configuration fields mapping between Service Mesh 2 and Service Mesh 3

Many of the `spec` fields in the {SMProduct} 2 `ServiceMeshControlPlane` can be configured in the the {SMProduct} 3 `Istio` resource.

The following tables provide guidance for configuring your `Istio` resource in {SMProduct} 3.

[id="cluster-configurations_{context}"]
== Cluster configurations

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.cluster.multiCluster.enabled
| spec.values.global.multiCluster.enabled
| spec.cluster.multiCluster.meshNetworks
| spec.values.global.meshNetworks
| spec.cluster.multiCluster.meshNetworks.endpoints
| spec.values.global.meshNetworks.endpoints
| spec.cluster.multiCluster.meshNetworks.endpoints.fromCID
| spec.values.global.meshNetworks.endpoints.fromCidr
| spec.cluster.multiCluster.meshNetworks.endpoints.fromRegistry
| spec.values.global.meshNetworks.endpoints.fromRegistry
| spec.cluster.multiCluster.meshNetworks.gateways
| spec.values.global.meshNetworks.gateways
| spec.cluster.multiCluster.meshNetworks.gateways.address
| spec.values.global.meshNetworks.gateways.address
| spec.cluster.multiCluster.meshNetworks.gateways.port
| spec.values.global.meshNetworks.gateways.port
| spec.cluster.multiCluster.meshNetworks.gateways.registryServiceName
| spec.values.global.meshNetworks.gateways.registryServiceName
| spec.cluster.name
| spec.values.global.multiCluster.clusterName
| spec.cluster.network
| spec.values.global.network
|===

[id="general-configurations_{context}"]
== General configurations

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.general.logging.componentLevels
| spec.values.global.logging.levels
| spec.general.logging.logAsJSON
| spec.values.global.logAsJson
| spec.general.validationMessages
| spec.values.global.istiod.enableAnalysis
|===

[id="meshconfig-configurations_{context}"]
== MeshConfig configurations

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.values.meshConfig.discoverySelectors
| spec.values.meshConfig.discoverySelectors
| spec.values.meshConfig.extensionProviders
| spec.values.meshConfig.extensionProviders
|===

[id="mode-configurations_{context}"]
== Mode configurations

The mode configurations in the {SMProduct} 2 `ServiceMeshControlPlane` resource were:

* Multitenant
* Cluster-wide
* Federation

In {SMProduct} 3, the mode is not configured by using a single field in the `Istio` resource.

By default, the {SMProduct} 3 control plane has access to all namespaces which is equivalent to cluster-wide mode in {SMProduct} 2. For a similar configuration to `MultiTenant` mode in {SMProduct} 2 in {SMProduct} 3, you must use the `discoverySelectors` field. For more information, see "Deploying multiple service meshes on a single cluster".

[id="profile-configurations_{context}"]
== Profile configurations

The profile configuration options for {SMProduct} 3 are:

* `ambient`
* `default`
* `demo`
* `empty`
* `openshift-ambient`
* `openshift`
* `preview`
* `stable`

[id="proxy-congifurations_{context}"]
== Proxy configurations

[id="access-logging-configuration-fields_{context}"]
=== Access logging configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.proxy.accessLogging.envoyService.address
| spec.values.meshConfig.defaultConfig.envoyAccessLogService.address
| spec.proxy.accessLogging.envoyService.enabled
| spec.values.meshConfig.enableEnvoyAccessLogService
| spec.proxy.accessLogging.envoyService.tcpKeepalive
| spec.values.meshConfig.defaultConfig.envoyAccessLogService.tcpKeepalive
| spec.proxy.accessLogging.envoyService.tcpKeepalive.interval
| spec.values.meshConfig.defaultConfig.envoyAccessLogService.tcpKeepalive.interval
| spec.proxy.accessLogging.envoyService.tcpKeepalive.probes
| spec.values.meshConfig.defaultConfig.envoyAccessLogService.tcpKeepalive.probes
| spec.proxy.accessLogging.envoyService.tcpKeepalive.time
| spec.values.meshConfig.defaultConfig.envoyAccessLogService.tcpKeepalive.time
| spec.proxy.accessLogging.envoyService.tlsSettings
| spec.values.meshConfig.defaultConfig.envoyAccessLogService.tlsSettings
| spec.proxy.accessLogging.file.encoding
| spec.values.meshConfig.accessLogEncoding
| spec.proxy.accessLogging.file.format
| spec.values.meshConfig.accessLogFormat
| spec.proxy.accessLogging.file.name
| spec.values.meshConfig.accessLogFile
|===

[id="basic-proxy-configuration-fields_{context}"]
=== Basic proxy configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.proxy.adminPort
| spec.values.meshConfig.defaultConfig.proxyAdminPort
| spec.proxy.concurrency
| spec.values.meshConfig.defaultConfig.concurrency
|===

[id="envoy-metrics-service-fields_{context}"]
=== Envoy metrics service fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.proxy.envoyMetricsService.address
| spec.values.meshConfig.defaultConfig.envoyMetricsService.address
| spec.proxy.envoyMetricsService.enabled
| spec.values.meshConfig.enableEnvoyAccessLogService
| spec.proxy.envoyMetricsService.tcpKeepalive
| spec.values.meshConfig.defaultConfig.envoyMetricsService.tcpKeepalive
| spec.proxy.envoyMetricsService.tlsSettings
| spec.values.meshConfig.defaultConfig.envoyMetricsService.tlsSettings
|===

[id="injection-configuration-fields_{context}"]
=== Injection configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.proxy.injection.alwaysInjectSelector
| spec.values.sidecarInjectorWebhook.alwaysInjectSelector
| spec.proxy.injection.neverInjectSelector
| spec.values.sidecarInjectorWebhook.neverInjectSelector
| spec.proxy.injection.injectedAnnotations
| spec.values.sidecarInjectorWebhook.injectedAnnotations
| spec.proxy.injection.autoInject
| spec.values.global.proxy.autoInject
|===

[id="proxy-logging-configuration-fields_{context}"]
=== Proxy logging configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.proxy.logging.componentLevels
| spec.values.global.proxy.componentLogLevel
| spec.proxy.logging.level
| spec.values.global.logging.level
|===

[id="proxy-networking-configuration-fields_{context}"]
=== Proxy networking configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.proxy.networking.clusterDomain
| spec.values.global.proxy.clusterDomain
| spec.proxy.networking.connectionTimeout
| spec.values.meshConfig.connectTimeout
| spec.proxy.networking.dns.refreshRate
| spec.values.meshConfig.dnsRefreshRate
| spec.proxy.networking.dns.searchSuffixes
| spec.values.global.podDNSSearchNamespaces
| spec.proxy.networking.initialization.initContainer.runtime.imageName
| spec.values.global.proxy_init.image
| spec.proxy.networking.initialization.initContainer.runtime.imagePullPolicy
| spec.values.global.imagePullPolicy
| spec.proxy.networking.initialization.initContainer.runtime.imagePullSecrets
| spec.values.global.imagePullSecrets
| spec.proxy.networking.initialization.initContainer.runtime.imageRegistry
| spec.values.global.hub
| spec.proxy.networking.initialization.initContainer.runtime.imageTag
| spec.values.global.tag
| spec.proxy.networking.initialization.initContainer.runtime.resources
| spec.values.global.proxy_init.resources
| spec.proxy.networking.maxConnectionAge
| spec.values.pilot.keepaliveMaxServerConnectionAge
| spec.proxy.networking.protocol.timeout
| spec.values.meshConfig.protocolDetectionTimeout
|===

[id="traffic-control-configuration-fields_{context}"]
=== Traffic control configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.proxy.networking.trafficControl.inbound.excludedPorts
| spec.values.global.proxy.excludeInboundPorts
| spec.proxy.networking.trafficControl.inbound.includedPorts
| spec.values.global.proxy.includeInboundPorts
| spec.proxy.networking.trafficControl.inbound.interceptionMode
| spec.values.meshConfig.defaultConfig.interceptionMode
| spec.proxy.networking.trafficControl.outbound.excludedIPRanges
| spec.values.global.proxy.excludeIPRanges
| spec.proxy.networking.trafficControl.outbound.excludedPorts
| spec.values.global.proxy.excludeOutboundPorts
| spec.proxy.networking.trafficControl.outbound.includedIPRanges
| spec.values.global.proxy.includeIPRanges
| spec.proxy.networking.trafficControl.outbound.policy
| spec.values.meshConfig.outboundTrafficPolicy.mode
|===

[id="proxy-runtime-configuration-fields_{context}"]
=== Proxy runtime configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.proxy.runtime.container.env
| spec.values.meshConfig.defaultConfig.proxyMetadata
| spec.proxy.runtime.container.imageName
| spec.values.global.proxy.image
| spec.proxy.runtime.container.imagePullPolicy
| spec.values.global.imagePullPolicy
| spec.proxy.runtime.container.imagePullSecrets
| spec.values.global.imagePullSecrets
| spec.proxy.runtime.container.imageRegistry
| spec.values.global.hub
| spec.proxy.runtime.container.imageTag
| spec.values.global.tag
| spec.proxy.runtime.container.resources
| spec.values.global.proxy.resources
| spec.proxy.runtime.readiness.failureThreshold
| spec.values.global.proxy.readinessFailureThreshold
| spec.proxy.runtime.readiness.initialDelaySeconds
| spec.values.global.proxy.readinessInitialDelaySeconds
| spec.proxy.runtime.readiness.periodSeconds
| spec.values.global.proxy.readinessPeriodSeconds
| spec.proxy.runtime.readiness.rewriteApplicationProbes
| spec.values.sidecarInjectorWebhook.rewriteAppHTTPProbe
| spec.proxy.runtime.readiness.statusPort
| spec.values.global.proxy.statusPort
|===

[id="runtime-configurations_{context}"]
== Runtime configurations

[id="container-configuration-fields_{context}"]
=== Container configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.runtime.components.container.env
| spec.values.pilot.env
| spec.runtime.components.container.imageName
| spec.values.pilot.image
| spec.runtime.components.container.imagePullPolicy
| spec.values.global.imagePullPolicy
| spec.runtime.components.container.imagePullSecrets
| spec.values.global.imagePullSecrets
| spec.runtime.components.container.imageRegistry
| spec.values.global.hub
| spec.runtime.components.container.imageTag
| spec.values.pilot.tag
| spec.runtime.components.container.resources
| spec.values.pilot.resources
|===

[id="deployment-configuration-fields_{context}"]
=== Deployment configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.runtime.components.deployment.autoScaling.enabled
| spec.values.pilot.autoscaleEnabled
| spec.runtime.components.deployment.autoScaling.maxReplicas
| spec.values.pilot.autoscaleMax
| spec.runtime.components.deployment.autoScaling.minReplicas
| spec.values.pilot.autoscaleMin
| spec.runtime.components.deployment.autoScaling.targetCPUUtilizationPercentage
| spec.values.pilot.cpu.targetAverageUtilization
| spec.runtime.components.deployment.replicas
| spec.values.pilot.replicaCount
| spec.runtime.components.deployment.strategy.rollingUpdate.maxSurge
| spec.values.pilot.rollingMaxSurge
| spec.runtime.components.deployment.strategy.rollingUpdate.maxUnavailable
| spec.values.pilot.rollingMaxUnavailable
|===

[id="pod-configuration-fields_{context}"]
=== Pod configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.runtime.components.pod.affinity
| spec.values.pilot.affinity
| spec.runtime.components.pod.affinity.nodeAffinity
| spec.values.pilot.affinity.nodeAffinity
| spec.runtime.components.pod.affinity.podAffinity
| spec.values.pilot.affinity.podAffinity
| spec.runtime.components.pod.affinity.podAntiAffinity
| spec.values.pilot.affinity.podAntiAffinity
| spec.runtime.components.pod.metadata.annotations
| spec.values.pilot.podAnnotations
| spec.runtime.components.pod.metadata.labels
| spec.values.pilot.podLabels
| spec.runtime.components.pod.nodeSelector
| spec.values.pilot.nodeSelector
| spec.runtime.components.pod.tolerations
| spec.values.pilot.tolerations
|===

[id="defaults-configuration-fields_{context}"]
=== Defaults configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.runtime.defaults.container.imagePullPolicy
| spec.values.global.imagePullPolicy
| spec.runtime.defaults.container.imagePullSecrets
| spec.values.global.imagePullSecrets
| spec.runtime.defaults.container.imageRegistry
| spec.values.global.hub
| spec.runtime.defaults.container.imageTag
| spec.values.global.tag
| spec.runtime.defaults.container.resources
| spec.values.global.defaultResources
| spec.runtime.defaults.deployment.podDisruption.enabled
| spec.values.global.defaultPodDisruptionBudget.enabled
| spec.runtime.defaults.pod.nodeSelector
| spec.values.global.defaultNodeSelector
| spec.runtime.defaults.pod.tolerations
| spec.values.global.defaultTolerations
|===

[id="security-configurations_{context}"]
== Security configurations

[id="certificate-authority-fields_{context}"]
=== Certificate Authority (CA) fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.security.certificateAuthority.cert-manager
| spec.values.meshConfig.ca AND spec.values.global.pilotCertProvider
| spec.security.certificateAuthority.cert-manager.address
| spec.values.meshConfig.ca.address
| spec.security.certificateAuthority.custom.address
| spec.values.meshConfig.ca.address
|===

[id="istiod-ca-fields_{context}"]
=== Istiod CA fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.security.certificateAuthority.istiod.type
| spec.values.global.pilotCertProvider
|===

[id="control-plane-security-fields_{context}"]
=== Control plane security fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.security.controlPlane.certProvider
| spec.values.global.pilotCertProvider
| spec.security.controlPlane.mtls
| spec.values.meshConfig.enableAutoMtls
| spec.security.controlPlane.tls.cipherSuites
| spec.values.meshConfig.tlsDefaults.cipherSuites
| spec.security.controlPlane.tls.ecdhCurves
| spec.values.meshConfig.tlsDefaults.ecdhCurves
| spec.security.controlPlane.tls.minProtocolVersion
| spec.values.meshConfig.tlsDefaults.minProtocolVersion
|===

[id="data-plane-security-fields_{context}"]
=== Data plane security fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.security.dataPlane.automtls
| spec.values.meshConfig.enableAutoMtls
| spec.security.dataPlane.mtls
| spec.values.meshConfig.meshMTLS
|===

[id="identity-configuration-fields_{context}"]
=== Identity configuration fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.security.identity.thirdParty.audience
| spec.values.global.sds.token.aud
|===

[id="other-security-fields_{context}"]
=== Other security fields

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.security.jwksResolverCA
| spec.values.pilot.jwksResolverExtraRootCA
| spec.security.trust.domain
| spec.values.meshConfig.trustDomain
| spec.security.trust.additionalDomains
| spec.values.meshConfig.trustDomainAliases
|===

[id="tracing-configurations_{context}"]
== Tracing configurations

[cols="1,1"]
|===
| SMCP 2.6 configuration | Istio 3.0 configuration

| spec.tracing.sampling
| spec.values.pilot.traceSampling
|===