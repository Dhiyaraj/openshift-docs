// Module included in the following assemblies:
//
// * serverless/eventing/event-sinks/serverless-jobsink.adoc

:_content-type: PROCEDURE
[id="serverless-jobsink-examples_{context}"]
= Simulating FailJob action

//more info about FailJob?

.Procedure

* Trigger a `FailJob` action by including a bug simulating command in your JobSink definition. 
+
.Example of JobSink failure
[source,yaml]
----
apiVersion: sinks.knative.dev/v1alpha1
kind: JobSink
metadata:
  name: job-sink-failure
spec:
  job:
    metadata:
      labels:
        my-label: my-value
    spec:
      completions: 12
      parallelism: 3
      template:
        spec:
          restartPolicy: Never
          containers:
            - name: main
              image: docker.io/library/bash:5
              command: [ "bash" ]        # example command simulating a bug which triggers the FailJob action
              args:
                - -c
                - echo "Hello world!" && sleep 5 && exit 42
      backoffLimit: 6
      podFailurePolicy:
        rules:
          - action: FailJob
            onExitCodes:
              containerName: main      # optional
              operator: In             # one of: In, NotIn
              values: [ 42 ]
          - action: Ignore             # one of: Ignore, FailJob, Count
            onPodConditions:
              - type: DisruptionTarget   # indicates Pod disruption
----