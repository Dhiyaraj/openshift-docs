:_mod-docs-content-type: ASSEMBLY
[id="serverless-logic-managing-persistence"]
= Managing workflow persistence
:context: serverless-logic-managing-persistence
include::_attributes/common-attributes.adoc[]

toc::[]

You can configure a `SonataFlow` instance to use persistence and store workflow context in a relational database.

By design, Kubernetes pods are stateless. This behavior can pose challenges for workloads that need to maintain the application state across pod restarts. In the case of {ServerlessLogicProductName}, the workflow context is lost when the pod restarts by default.

To ensure workflow recovery in such scenarios, you must configure workflow runtime persistence. Use the `SonataFlowPlatform` custom resource (CR) or the `SonataFlow` CR to provide this configuration. The scope of the configuration varies depending on which resource you use.

include::modules/serverless-logic-config-persistence-using-sonataflowplaform-cr.adoc[leveloffset=+1]
include::modules/serverless-logic-config-persistence-using-sonataflow-cr.adoc[leveloffset=+1]
include::modules/serverless-logic-persistence-precedence-rules.adoc[leveloffset=+1]
include::modules/serverless-logic-profile-persistence-requirements.adoc[leveloffset=+1]
include::modules/serverless-logic-persistence-db-schema-initialization.adoc[leveloffset=+1]